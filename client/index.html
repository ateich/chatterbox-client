<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>chatterbox</title>
    <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="styles/styles.css">

    <!-- dependencies -->
    <script src="bower_components/jquery/jquery.min.js"></script>
    <script src="bower_components/underscore/underscore-min.js"></script>
    <script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
    <!-- your scripts -->
    <script src="scripts/config.js"></script>
    <script src="scripts/app.js"></script>
  </head>
  <body>
    <div id="main" class="container">
      <p class="user pull-right name">Logged in as: </p>
      <h1 class="text-center">Chatterbox</h1>
      <!-- Your HTML goes here! -->
      <div class="row">
        <div class="col-sm-3">
        <h3 class="text-center">Rooms</h3>
        <input type="text" placeholder="add room" name="roomName" class="col-sm-9" id="roomName" />
        <button type="submit" class="btn btn-primary btn-xs col-sm-3" id="sendRoom">+</button>
        <div id="roomSelect">

        </div>

        </div>
        <div id="chats" class="col-sm-9">

        </div>
      </div>
      <div class="sendMessage">
        <input type="text" placeholder="Type Your Message" name="userMessage" id="userMessage" />
        <button type="submit" class="btn btn-primary submit" id="send">Send</button>
      </div>
    </div>
  <script>
    app.init();
    app.fetch();
    var fetchInterval = setInterval(function(){
      app.fetch()
    }, 3000);
    $('#send').on('click', function() {
      var msgText = $('input[name=userMessage]').val();
      var message = {
        username: app.currentUser,
        text: msgText,
        roomname: app.currentRoom
      };
      app.send(message);
      $('input[name=userMessage]').val('');
    });
    $('#sendRoom').on('click', function() {
      var roomName = $('input[name=roomName]').val();
      app.addRoom(roomName);
      $('input[name=roomName]').val('');
      $('#' + roomName).trigger('click');
    });
  </script>
  </body>
</html>
